(()=>{"use strict";document.addEventListener("DOMContentLoaded",()=>{const t="cart";let e=JSON.parse(localStorage.getItem(t))||[];const n=document.querySelector(".basket__count");if(n){const t=(JSON.parse(localStorage.getItem("cart"))||[]).reduce((t,e)=>t+e.quantity,0);n.textContent=t}function c(){localStorage.setItem(t,JSON.stringify(e))}const a=document.querySelector(".order__call-basket"),r=document.querySelector(".basket__overlay");function o(){const t=[document.querySelector(".cart__basket"),document.querySelector(".cart__bag")].filter(Boolean),n=document.querySelectorAll(".cart__bag"),a=document.querySelectorAll(".total"),i=document.querySelector(".count"),s=document.querySelector(".basket__count");t&&t.forEach(t=>{t.innerHTML=""});let l=0,u=0;e.forEach((n,a)=>{l+=n.price*n.quantity,u+=n.quantity,t.forEach(t=>{const r=document.createElement("div");r.className="cart-item",r.innerHTML=`\n         \n      <div class="input__body">\n      <p class="input__body-name">${n.name}</p>\n     \n\n      <div class="input__count">\n            <img src="img/basket/arrowLeft.webp" alt="left" class="input__img--right decrease">\n       <input class="input__card" readonly type="text" placeholder=${n.quantity}> \n       <img src="img/basket/arrowRight.webp" alt="right" class="input__img--left increase">\n\n   \n      </div>\n      <p class="input__price">${n.price} грн.</p>\n      <p class="input__price-all">${n.price*n.quantity} грн.</p>\n         <button class="remove">x</button>\n      </div>\n      \n    `,r.querySelector(".increase").addEventListener("click",()=>function(t){e[t].quantity++,c(),o()}(a)),r.querySelector(".decrease").addEventListener("click",()=>function(t){e[t].quantity--,e[t].quantity<=0&&e.splice(t,1),c(),o()}(a)),r.querySelector(".remove").addEventListener("click",()=>function(t){e.splice(t,1),c(),o()}(a)),t.appendChild(r)})}),i&&(i.textContent=u),s&&(s.textContent=u),a&&a.forEach(t=>{t.textContent=l}),n.forEach(t=>{""===t.innerHTML&&r.classList.remove("active")})}document.querySelectorAll(".add-to-cart").forEach(t=>{t.addEventListener("click",t=>{t.preventDefault();const n=t.target.closest(".product");if(!n)return;const a=n.dataset.name,r=parseFloat(n.dataset.price),i=e.find(t=>t.name===a&&t.price===r);i?i.quantity++:e.push({name:a,price:r,quantity:1}),c(),o()})}),o();const i=document.querySelector(".basket__link");i&&i.addEventListener("click",t=>{window.location.pathname.endsWith("basket.html")&&t.preventDefault()}),a.addEventListener("click",t=>{r&&(r.classList.toggle("active"),"/basket.html"===window.location.pathname&&(t.preventDefault(),t.stopPropagation()))}),document.addEventListener("click",t=>{r&&(r.contains(t.target)||a.contains(t.target)||r.classList.remove("active"))}),window.addEventListener("scroll",()=>{window.scrollY>400&&r.classList.remove("active")})})})();
//# sourceMappingURL=basket.bundle.js.map