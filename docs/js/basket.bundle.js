(()=>{"use strict";document.addEventListener("DOMContentLoaded",()=>{const e="cart";let t=JSON.parse(localStorage.getItem(e))||[];const n=document.querySelector(".basket__count");if(n){const e=(JSON.parse(localStorage.getItem("cart"))||[]).reduce((e,t)=>e+t.quantity,0);n.textContent=e}function c(){localStorage.setItem(e,JSON.stringify(t))}const r=document.querySelector(".order__call-basket"),a=document.querySelector(".basket__overlay");function o(){const e=[document.querySelector(".cart__basket"),document.querySelector(".cart__bag")].filter(Boolean),n=document.querySelectorAll(".cart__bag"),r=document.querySelectorAll(".total"),i=document.querySelector(".count"),l=document.querySelector(".basket__count");e&&e.forEach(e=>{e.innerHTML=""});let s=0,u=0;t.forEach((n,r)=>{s+=n.price*n.quantity,u+=n.quantity,e.forEach(e=>{const a=document.createElement("div");a.className="cart-item",a.innerHTML=`\n         \n      <div class="input__body">\n      <p class="input__body-name">${n.name}</p>\n     \n\n      <div class="input__count">\n            <img src="img/basket/arrowLeft.webp" alt="left" class="input__img--right decrease">\n       <input class="input__card" readonly type="text" placeholder=${n.quantity}> \n       <img src="img/basket/arrowRight.webp" alt="right" class="input__img--left increase">\n\n   \n      </div>\n      <p class="input__price">${n.price} грн.</p>\n      <p class="input__price-all">${n.price*n.quantity} грн.</p>\n         <button class="remove">x</button>\n      </div>\n      \n    `,a.querySelector(".increase").addEventListener("click",()=>function(e){t[e].quantity++,c(),o()}(r)),a.querySelector(".decrease").addEventListener("click",()=>function(e){t[e].quantity--,t[e].quantity<=0&&t.splice(e,1),c(),o()}(r)),a.querySelector(".remove").addEventListener("click",()=>function(e){t.splice(e,1),c(),o()}(r)),e.appendChild(a)})}),i&&(i.textContent=u),l&&(l.textContent=u),r&&r.forEach(e=>{e.textContent=s}),n.forEach(e=>{""===e.innerHTML&&a.classList.remove("active")})}document.querySelectorAll(".add-to-cart").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault();const n=e.target.closest(".product");if(!n)return;const r=n.dataset.name,a=parseFloat(n.dataset.price),i=t.find(e=>e.name===r&&e.price===a);i?i.quantity++:t.push({name:r,price:a,quantity:1}),c(),o()})}),o();const i=document.querySelector(".basket__link");i&&i.addEventListener("click",e=>{window.location.href.includes("basket.html")&&e.preventDefault()}),r.addEventListener("click",e=>{a&&(a.classList.toggle("active"),window.location.href.includes("basket.html")&&(e.preventDefault(),e.stopPropagation()))}),window.addEventListener("scroll",()=>{a&&window.scrollY>400&&a.classList.remove("active")});const l=document.querySelector(".basket__back-order--succsecc");l&&l.addEventListener("click",e=>{e.preventDefault(),document.querySelectorAll(".cart-item").length>0?window.location.href="orderProduct.html":alert("Добавьте товар")})})})();
//# sourceMappingURL=basket.bundle.js.map