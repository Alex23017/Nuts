{"version":3,"file":"basket.bundle.js","mappings":"mBAAAA,SAASC,iBAAiB,mBAAoB,KAC5C,MAAMC,EAAU,OAEhB,IAAIC,EAAOC,KAAKC,MAAMC,aAAaC,QAAQL,KAAa,GAExD,MAAMM,EAAcR,SAASS,cAAc,kBAC3C,GAAID,EAAa,CACf,MACME,GADYN,KAAKC,MAAMC,aAAaC,QAAQ,UAAY,IACjCI,OAAO,CAACC,EAAKC,IAASD,EAAMC,EAAKC,SAAU,GACxEN,EAAYO,YAAcL,CAC5B,CACA,SAASM,IACPV,aAAaW,QAAQf,EAASE,KAAKc,UAAUf,GAC/C,CACA,MAAMgB,EAAcnB,SAASS,cAAc,uBACrCW,EAAgBpB,SAASS,cAAc,oBAE7C,SAASY,IACP,MAAMC,EAAU,CACdtB,SAASS,cAAc,iBACvBT,SAASS,cAAc,eACvBc,OAAOC,SACHC,EAAUzB,SAAS0B,iBAAiB,cACpCC,EAAY3B,SAAS0B,iBAAiB,UACtCE,EAAY5B,SAASS,cAAc,UACnCD,EAAcR,SAASS,cAAc,kBACvCa,GACFA,EAAQO,QAASC,IACfA,EAAOC,UAAY,KAIvB,IAAIC,EAAQ,EACRC,EAAQ,EAEZ9B,EAAK0B,QAAQ,CAAChB,EAAMqB,KAClBF,GAASnB,EAAKsB,MAAQtB,EAAKC,SAC3BmB,GAASpB,EAAKC,SACdQ,EAAQO,QAASC,IACf,MAAMM,EAAMpC,SAASqC,cAAc,OACnCD,EAAIE,UAAY,YAChBF,EAAIL,UAAY,mFAGYlB,EAAK0B,4NAK4B1B,EAAKC,+JAK1CD,EAAKsB,qDACDtB,EAAKsB,MAAQtB,EAAKC,4FAM9CsB,EAAI3B,cAAc,aAAaR,iBAAiB,QAAS,IA2C/D,SAAkBiC,GAChB/B,EAAK+B,GAAOpB,WACZE,IACAK,GACF,CA/CqEmB,CAASN,IACxEE,EAAI3B,cAAc,aAAaR,iBAAiB,QAAS,IAgD/D,SAAkBiC,GAChB/B,EAAK+B,GAAOpB,WACRX,EAAK+B,GAAOpB,UAAY,GAAGX,EAAKsC,OAAOP,EAAO,GAClDlB,IACAK,GACF,CArDqEqB,CAASR,IACxEE,EAAI3B,cAAc,WAAWR,iBAAiB,QAAS,IAsD7D,SAAoBiC,GAClB/B,EAAKsC,OAAOP,EAAO,GACnBlB,IACAK,GACF,CA1DmEsB,CAAWT,IAExEJ,EAAOc,YAAYR,OAInBR,IAAWA,EAAUb,YAAckB,GACnCzB,IAAaA,EAAYO,YAAckB,GACvCN,GACFA,EAAUE,QAASgB,IACjBA,EAAQ9B,YAAciB,IAI1BP,EAAQI,QAASiB,IACO,KAAlBA,EAAIf,WACNX,EAAc2B,UAAUC,OAAO,WAGrC,CAEAhD,SAAS0B,iBAAiB,gBAAgBG,QAASoB,IACjDA,EAAIhD,iBAAiB,QAAUiD,IAC7BA,EAAEC,iBACF,MAAMC,EAAaF,EAAEG,OAAOC,QAAQ,YACpC,IAAKF,EAAY,OACjB,MAAMb,EAAOa,EAAWG,QAAQhB,KAC1BJ,EAAQqB,WAAWJ,EAAWG,QAAQpB,OAEtCsB,EAAWtD,EAAKuD,KAAM7C,GAASA,EAAK0B,OAASA,GAAQ1B,EAAKsB,QAAUA,GACtEsB,EACFA,EAAS3C,WAETX,EAAKwD,KAAK,CAAEpB,OAAMJ,QAAOrB,SAAU,IAGrCE,IACAK,QAuBJA,IAEAF,EAAYlB,iBAAiB,QAAUiD,IACjC9B,IACFA,EAAc2B,UAAUa,OAAO,UACE,iBAA7BC,OAAOC,SAASC,UAClBb,EAAEC,qB","sources":["webpack://portierdigital/./src/js/basket.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  const cartKey = \"cart\";\r\n\r\n  let cart = JSON.parse(localStorage.getItem(cartKey)) || [];\r\n\r\n  const basketCount = document.querySelector(\".basket__count\");\r\n  if (basketCount) {\r\n    const savedCart = JSON.parse(localStorage.getItem(\"cart\")) || [];\r\n    const totalCount = savedCart.reduce((sum, item) => sum + item.quantity, 0);\r\n    basketCount.textContent = totalCount;\r\n  }\r\n  function saveCart() {\r\n    localStorage.setItem(cartKey, JSON.stringify(cart));\r\n  }\r\n  const orderBasket = document.querySelector(\".order__call-basket\");\r\n  const basketOverlay = document.querySelector(\".basket__overlay\");\r\n\r\n  function renderCart() {\r\n    const cartDiv = [\r\n      document.querySelector(\".cart__basket\"),\r\n      document.querySelector(\".cart__bag\"),\r\n    ].filter(Boolean);\r\n    const cartBag = document.querySelectorAll(\".cart__bag\");\r\n    const totalSpan = document.querySelectorAll(\".total\");\r\n    const countSpan = document.querySelector(\".count\");\r\n    const basketCount = document.querySelector(\".basket__count\");\r\n    if (cartDiv) {\r\n      cartDiv.forEach((cartEl) => {\r\n        cartEl.innerHTML = \"\";\r\n      });\r\n    }\r\n\r\n    let total = 0;\r\n    let count = 0;\r\n\r\n    cart.forEach((item, index) => {\r\n      total += item.price * item.quantity;\r\n      count += item.quantity;\r\n      cartDiv.forEach((cartEl) => {\r\n        const div = document.createElement(\"div\");\r\n        div.className = \"cart-item\";\r\n        div.innerHTML = `\r\n         \r\n      <div class=\"input__body\">\r\n      <p class=\"input__body-name\">${item.name}</p>\r\n     \r\n\r\n      <div class=\"input__count\">\r\n            <img src=\"img/basket/arrowLeft.webp\" alt=\"left\" class=\"input__img--right decrease\">\r\n       <input class=\"input__card\" readonly type=\"text\" placeholder=${item.quantity}> \r\n       <img src=\"img/basket/arrowRight.webp\" alt=\"right\" class=\"input__img--left increase\">\r\n\r\n   \r\n      </div>\r\n      <p class=\"input__price\">${item.price} грн.</p>\r\n      <p class=\"input__price-all\">${item.price * item.quantity} грн.</p>\r\n         <button class=\"remove\">x</button>\r\n      </div>\r\n      \r\n    `;\r\n\r\n        div.querySelector(\".increase\").addEventListener(\"click\", () => increase(index));\r\n        div.querySelector(\".decrease\").addEventListener(\"click\", () => decrease(index));\r\n        div.querySelector(\".remove\").addEventListener(\"click\", () => removeItem(index));\r\n\r\n        cartEl.appendChild(div);\r\n      });\r\n    });\r\n\r\n    if (countSpan) countSpan.textContent = count;\r\n    if (basketCount) basketCount.textContent = count;\r\n    if (totalSpan) {\r\n      totalSpan.forEach((totalEl) => {\r\n        totalEl.textContent = total;\r\n      });\r\n    }\r\n\r\n    cartBag.forEach((bag) => {\r\n      if (bag.innerHTML === \"\") {\r\n        basketOverlay.classList.remove(\"active\");\r\n      }\r\n    });\r\n  }\r\n\r\n  document.querySelectorAll(\".add-to-cart\").forEach((btn) => {\r\n    btn.addEventListener(\"click\", (e) => {\r\n      e.preventDefault();\r\n      const productDiv = e.target.closest(\".product\");\r\n      if (!productDiv) return;\r\n      const name = productDiv.dataset.name;\r\n      const price = parseFloat(productDiv.dataset.price);\r\n\r\n      const existing = cart.find((item) => item.name === name && item.price === price);\r\n      if (existing) {\r\n        existing.quantity++;\r\n      } else {\r\n        cart.push({ name, price, quantity: 1 });\r\n      }\r\n\r\n      saveCart();\r\n      renderCart();\r\n    });\r\n  });\r\n\r\n  function increase(index) {\r\n    cart[index].quantity++;\r\n    saveCart();\r\n    renderCart();\r\n  }\r\n\r\n  function decrease(index) {\r\n    cart[index].quantity--;\r\n    if (cart[index].quantity <= 0) cart.splice(index, 1);\r\n    saveCart();\r\n    renderCart();\r\n  }\r\n\r\n  function removeItem(index) {\r\n    cart.splice(index, 1);\r\n    saveCart();\r\n    renderCart();\r\n  }\r\n\r\n  renderCart();\r\n\r\n  orderBasket.addEventListener(\"click\", (e) => {\r\n    if (basketOverlay) {\r\n      basketOverlay.classList.toggle(\"active\");\r\n      if (window.location.pathname === \"/basket.html\") {\r\n        e.preventDefault();\r\n      }\r\n    }\r\n  });\r\n});\r\n"],"names":["document","addEventListener","cartKey","cart","JSON","parse","localStorage","getItem","basketCount","querySelector","totalCount","reduce","sum","item","quantity","textContent","saveCart","setItem","stringify","orderBasket","basketOverlay","renderCart","cartDiv","filter","Boolean","cartBag","querySelectorAll","totalSpan","countSpan","forEach","cartEl","innerHTML","total","count","index","price","div","createElement","className","name","increase","splice","decrease","removeItem","appendChild","totalEl","bag","classList","remove","btn","e","preventDefault","productDiv","target","closest","dataset","parseFloat","existing","find","push","toggle","window","location","pathname"],"sourceRoot":""}